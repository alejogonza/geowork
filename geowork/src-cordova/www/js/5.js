(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"943b":function(e,s,a){"use strict";a("9ab8")},"996f":function(e,s,a){"use strict";a.r(s);var t=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:" flex-center"},[a("h3",{staticStyle:{"text-align":"center"}},[e._v("Your account")]),a("div",{staticClass:"items-start q-gutter-md flex flex-center"},[a("q-card",{staticClass:"my-card"},[a("q-card-section",{staticClass:"q-pa-xs-md  "},[a("q-input",{attrs:{label:"Username","reactive-rules":"","stack-label":"",rules:[function(e){return e&&e.length>7||"Please type min 8 characters"}]},on:{focus:e.usernameClear,blur:function(s){e.validateUser(),e.editEnabled()}},model:{value:e.username,callback:function(s){e.username=s},expression:"username"}}),a("br"),a("q-input",{attrs:{label:"Email","stack-label":"","lazy-rules":"",rules:[function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(e)||"Please type a valid email address"}]},on:{blur:function(s){e.validateEmail(),e.editEnabled()},focus:e.emailClear},model:{value:e.email,callback:function(s){e.email=s},expression:"email"}}),a("br"),a("q-input",{attrs:{label:"Password","stack-label":"","label-slot":"",type:e.isPwd?"password":"text","lazy-rules":"",rules:[function(e){return e&&e.length>7||"Please type min 8 characters"}]},on:{focus:e.passClear,blur:e.editEnabled},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(s){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.password,callback:function(s){e.password=s},expression:"password"}}),a("br"),a("div",{staticClass:"flex flex-center"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.editDisable,expression:"!editDisable"}],staticClass:"flex flex-center",attrs:{color:"primary",label:"Edit profile"},on:{click:e.onSubmit}})],1),a("div",{staticClass:"flex flex-center"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.editDisable,expression:"editDisable"}],staticClass:"flex flex-center",attrs:{color:"primary",label:"Edit profile",disabled:""}})],1)],1)],1)],1)])},i=[],r=(a("e6cf"),{data(){return{isPwd:!0,username:"",email:"",password:"",UserUsername:"",UserEmail:"",UserPassword:"",editDisable:!0}},async beforeCreate(){try{this.$q.loading.show();const e=await this.$axios.get("auth/me",{headers:{token:window.localStorage.getItem("token")}});this.username=this.UserUsername=e.data.user.username,this.email=this.UserEmail=e.data.user.email,this.password=this.UserPassword="yoursecretpassword",this.$q.loading.hide()}catch(e){this.$q.loading.hide(),0==e.response.data.auth&&(window.localStorage.clear(),this.$router.push("/"))}},methods:{editEnabled(){(this.username!=this.UserUsername&&""!=this.username&&this.username.length>7&&this.validateUser()||this.email!=this.UserEmail&&""!=this.email&&/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(this.email)&&this.validateEmail()||this.password!=this.UserPassword&&""!=this.password&&this.password.length>7)&&(this.editDisable=!1)},passClear(){this.password=""},emailClear(){this.email=""},usernameClear(){this.username=""},async onSubmit(){try{let e={};if(this.username!=this.UserUsername&&(e.username=this.username),this.email!=this.UserEmail&&(e.email=this.email),this.password!=this.UserPassword&&(e.password=this.password),this.username!=this.UserUsername||this.email!=this.UserEmail||this.password!=this.UserPassword){const s=await this.$axios.patch("/me",e,{headers:{token:window.localStorage.getItem("token")}});this.$q.notify({message:"Profile updated successfully",color:"green",position:"top"}),this.username=this.UserUsername=s.data.user.username,this.email=this.UserEmail=s.data.user.email,this.password=this.UserPassword="yoursecretpassword"}}catch(e){0==e.response.data.auth&&(window.localStorage.clear(),this.$router.push("/"))}},async validateUser(){if(null!=this.username&&this.username.length>7)try{await this.$axios.post("username-validate",{username:this.username});return this.userValid=!0,!0}catch(e){return this.username="",console.error(e.response.data),this.$q.notify({group:!1,message:e.response.data.message,color:"red",position:"top"}),this.editDisable=!0,!1}},async validateEmail(){if(null!=this.email&&this.email.length>7)try{await this.$axios.post("email-validate",{email:this.email});return this.userValid=!0,!0}catch(e){return this.email="",console.error(e.response.data),this.$q.notify({group:!1,message:e.response.data.message,color:"red",position:"top"}),this.editDisable=!0,!1}}}}),l=r,n=(a("943b"),a("2877")),o=a("f09f"),d=a("a370"),c=a("27f9"),u=a("0016"),h=a("9c40"),m=a("eebe"),p=a.n(m),w=Object(n["a"])(l,t,i,!1,null,"a6bd3e8a",null);s["default"]=w.exports;p()(w,"components",{QCard:o["a"],QCardSection:d["a"],QInput:c["a"],QIcon:u["a"],QBtn:h["a"]})},"9ab8":function(e,s,a){}}]);