(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{8758:function(t,o,e){"use strict";e.r(o);var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.jobs,expression:"jobs"}],staticClass:"q-pa-md row items-start q-gutter-md flex flex-center"},t._l(t.jobs,(function(o,s){return e("q-card",{key:s,staticClass:"my-card",attrs:{flat:"",bordered:""}},[e("div",[t.showMap?e("l-map",{staticStyle:{height:"200px",width:"100%"},attrs:{zoom:t.zoom,center:t.center,options:t.options}},[e("l-tile-layer",{attrs:{url:t.url}}),e("l-feature-group",[e("l-marker",{attrs:{"lat-lng":t.jobCoords[s]}},[e("l-tooltip",{attrs:{options:{permanent:!0,interactive:!0}}},[e("div",[t._v("\n                  This job\n                ")])])],1),e("l-marker",{attrs:{"lat-lng":t.userCoords}},[e("l-tooltip",{attrs:{options:{permanent:!0,interactive:!0}}},[e("div",[t._v("\n                  You\n                ")])])],1)],1),e("l-polyline",{attrs:{"lat-lngs":t.travel[s]}})],1):t._e()],1),e("q-card-section",[e("div",{staticClass:"text-overline text-orange-9"},[t._v(t._s(o.pay))]),e("div",{staticClass:"text-h5 q-mt-sm q-mb-xs"},[t._v(t._s(o.title))]),e("div",{staticClass:"text-caption text-grey"},[t._v("\n          "+t._s(o.description)+"\n        ")])])],1)})),1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.errorJobs,expression:"errorJobs"}],staticClass:"absolute-center",staticStyle:{"text-align":"center"}},[e("img",{staticStyle:{width:"200px"},attrs:{src:"https://www.iconpacks.net/icons/2/free-sad-face-icon-2691-thumb.png"}}),e("h3",{staticStyle:{margin:"10px"}},[t._v("Sorry, no jobs found")])])])},r=[],a=(e("e6cf"),e("e11e")),i=e("2699"),n=e("a40a"),l=e("4e2b"),c=e("31dc"),d=e("635f"),h=e("c5ca");e("6cc5");delete a["Icon"].Default.prototype._getIconUrl,a["Icon"].Default.mergeOptions({iconRetinaUrl:e("584d"),iconUrl:e("6397"),shadowUrl:e("e2b9")});var u={name:"map",components:{LMap:i["a"],LTileLayer:n["a"],LMarker:l["a"],LTooltip:c["a"],LPolyline:d["a"],LFeatureGroup:h["a"]},created(){if(this.$q.platform.is.cordova){var t=function(t){};function o(t){navigator.geolocation.getCurrentPosition(this.onSucccess,this.onError)}navigator.geolocation.getCurrentPosition(t,o)}"geolocation"in navigator?navigator.geolocation.getCurrentPosition(this.onSucccess,this.onError):this.$q.notify({message:"Geolocation not available",color:"red",position:"top"})},data(){return{zoom:6,center:null,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",jobs:null,errorJobs:!1,jobCoords:[],showMap:!1,userCoords:null,options:{zoomControl:!1},travel:[]}},methods:{async onSucccess(t){this.$q.loading.show();try{const t=await this.$axios.get("/jobs",{headers:{token:window.localStorage.getItem("token")}});t.data.jobs?this.jobs=t.data.jobs:(this.errorJobs=!0,this.$q.loading.hide()),this.$q.loading.hide()}catch(e){this.$q.loading.hide(),this.errorJobs=!0,0==e.response.data.auth&&(window.localStorage.clear(),this.$router.push("/"))}if(null!=this.jobs){for(var o=0;o<this.jobs.length;o++)this.travel.push([[t.coords.latitude,t.coords.longitude],[this.jobs[o].coords.lat,this.jobs[o].coords.lng]]),this.jobCoords.push(Object(a["latLng"])([this.jobs[o].coords.lat,this.jobs[o].coords.lng]));this.showMap=!0,this.userCoords=Object(a["latLng"])(t.coords.latitude,t.coords.longitude),this.center=Object(a["latLng"])(t.coords.latitude,t.coords.longitude)}},onError(){this.errorJobs=!0,this.$q.notify({message:"We need permissions to see your location",color:"red",position:"top"})}}},p=u,g=(e("e248"),e("2877")),b=e("f09f"),v=e("a370"),m=e("eebe"),f=e.n(m),w=Object(g["a"])(p,s,r,!1,null,"9c1fc4c2",null);o["default"]=w.exports;f()(w,"components",{QCard:b["a"],QCardSection:v["a"]})},e248:function(t,o,e){"use strict";e("f6d6")},f6d6:function(t,o,e){}}]);